### Go 通道（Channel）要点总结  

#### **1. 基本特性**  
- **先进先出 (FIFO)**：数据按发送顺序处理。  
- **引用类型**：默认值为 `nil`（未初始化的通道）。  

#### **2. 声明与初始化**  
```go  
var ch1 chan int         // 声明传递整型的通道（未初始化，nil）  
var ch2 chan string      // 声明传递字符串的通道  
var ch3 chan []int       // 声明传递 int 切片的通道  
ch4 := make(chan int)    // 初始化整型通道（无缓冲）  
ch5 := make(chan bool)   // 初始化布尔通道  
ch6 := make(chan []int)  // 初始化 int 切片通道  
```  

#### **3. 通道操作**  
- **发送**：`ch <- value`（将值发送到通道）。  
- **接收**：`x := <-ch`（从通道接收值并赋值给变量）。  
- **忽略接收**：`<-ch`（仅接收值，不保存）。  
- **关闭**：`close(ch)`（关闭通道）。  

#### **4. 关闭后的通道特性**  
1. 向已关闭通道发送值 → **panic**。  
2. 从已关闭通道接收值 → 持续获取剩余值，直到通道为空。  
3. 从已关闭且无值的通道接收 → 返回类型零值（如 `int` 返回 `0`）。  
4. 重复关闭通道 → **panic**。  

#### **5. 单向通道**  
- **只发送通道**：`chan<- T`，仅能发送数据（例：`func counter(out chan<- int)`）。  
- **只接收通道**：`<-chan T`，仅能接收数据（例：`func printer(in <-chan int)`）。  
```go  
func counter(out chan<- int) {  
    for i := 0; ; i++ { out <- i }  
    close(out)  
}  
func printer(in <-chan int) {  
    for i := range in { fmt.Println(i) }  
}  
```  

#### **6. 无缓冲通道（同步通道）**  
```go  
ch := make(chan int) // 创建无缓冲通道  
ch <- 10             // 发送操作阻塞，直到另一端接收  
```  
**陷阱**：  
```go  
ch := make(chan int)  
ch <- 10 // 阻塞主协程 → 死锁（fatal error）  
```  
**修正**：  
```go  
ch := make(chan int)  
go func(c chan int) { c <- 10 }(ch) // 异步发送  
x := <-ch // 主协程接收解除阻塞  
```  

#### **7. 有缓冲通道**  
```go  
ch := make(chan int, 1) // 容量为 1 的缓冲通道  
ch <- 10                 // 不阻塞（缓冲区未满）  
fmt.Println("发送成功")  // 可正常执行  
```  
- **特点**：  
  - 缓冲区未满时，发送不阻塞。  
  - 缓冲区非空时，接收不阻塞。  

---  
**核心注意**：  
- **死锁**：无缓冲通道必须配对发送/接收（或使用缓冲通道）。  
- **零值**：未初始化通道（`nil`）的发送/接收操作会永久阻塞。  
- **通道方向**：单向通道用于限制函数对通道的操作权限。  
- **关闭原则**：仅发送方关闭通道，避免重复关闭。